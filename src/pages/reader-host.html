<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Reader View</title>
    <link rel="stylesheet" href="styles/tokens.css">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="reader-host.css">
</head>

<body>
    <a class="skip-link" href="#comments-title">Skip to comments</a>
    <div id="reader-toolbar" class="toolbar-pill" role="toolbar" aria-label="Reader controls">
        <!-- Row 1: Appearance -->
        <div class="toolbar-row">
            <div class="segmented-control font-toggles" role="radiogroup" aria-label="Font">
                <button class="btn btn--segmented font-btn preview-serif" data-font="serif" title="Serif" aria-label="Serif font" type="button" role="radio" aria-checked="false">Ag</button>
                <button class="btn btn--segmented font-btn preview-sans" data-font="sans" title="Sans" aria-label="Sans font" type="button" role="radio" aria-checked="false">Aa</button>
                <button class="btn btn--segmented font-btn preview-modern" data-font="modern" title="Modern" aria-label="Modern font" type="button" role="radio" aria-checked="false">M</button>
            </div>
            <div class="theme-toggles" role="radiogroup" aria-label="Theme">
                <button class="btn btn--swatch theme-btn preview-theme-light" data-theme="light" title="Light" aria-label="Light theme" type="button" role="radio" aria-checked="false"></button>
                <button class="btn btn--swatch theme-btn preview-theme-sepia" data-theme="sepia" title="Sepia" aria-label="Sepia theme" type="button" role="radio" aria-checked="false"></button>
                <button class="btn btn--swatch theme-btn preview-theme-dark" data-theme="dark" title="Dark" aria-label="Dark theme" type="button" role="radio" aria-checked="false"></button>
                <button class="btn btn--swatch theme-btn preview-theme-solarized" data-theme="solarized" title="Solarized" aria-label="Solarized theme" type="button" role="radio" aria-checked="false"></button>
            </div>
        </div>

        <!-- Row 2: Actions -->
        <div class="toolbar-row actions-row">
            <button id="copy-post-md" class="btn btn--icon" title="Copy Markdown" aria-label="Copy Markdown" type="button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    aria-hidden="true" focusable="false"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
            </button>
            <button id="copy-post-comments-md" class="btn btn--icon" title="Copy + Comments" aria-label="Copy post and comments as Markdown" type="button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    aria-hidden="true" focusable="false"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    <path d="M13 13h-2v-2h2v2zm0-4h-2V7h2v2z"></path>
                </svg>
            </button>
            <div class="divider"></div>
            <button id="toggle-drawer" class="btn btn--icon" title="Comments & Settings" aria-label="Open settings" aria-haspopup="dialog" aria-expanded="false" aria-controls="settings-drawer" type="button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    aria-hidden="true" focusable="false"
                    stroke-linecap="round" stroke-linejoin="round">
                    <line x1="4" y1="21" x2="4" y2="14"></line>
                    <line x1="4" y1="10" x2="4" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12" y2="3"></line>
                    <line x1="20" y1="21" x2="20" y2="16"></line>
                    <line x1="20" y1="12" x2="20" y2="3"></line>
                    <line x1="1" y1="14" x2="7" y2="14"></line>
                    <line x1="9" y1="8" x2="15" y2="8"></line>
                    <line x1="17" y1="16" x2="23" y2="16"></line>
                </svg>
            </button>
        </div>
    </div>

    <!-- Hidden Settings Drawer -->
    <div id="settings-drawer" class="drawer" role="dialog" aria-modal="true" aria-labelledby="settings-title" aria-hidden="true" tabindex="-1">
        <div class="drawer-header">
            <h3 id="settings-title">Settings</h3>
            <button id="close-drawer" class="btn btn--icon btn--sm" type="button" aria-label="Close settings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    aria-hidden="true" focusable="false"
                    stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <div class="drawer-section">
            <label class="drawer-label">Open In</label>
            <!-- Pill Toggle for Open Mode -->
            <div id="open-mode-toggle" class="toggle-pill" role="radiogroup" aria-label="Open in">
                <button class="btn btn--segmented toggle-option active" data-value="same-tab" type="button" role="radio" aria-checked="true" tabindex="0">Same Tab</button>
                <button class="btn btn--segmented toggle-option" data-value="new-tab" type="button" role="radio" aria-checked="false" tabindex="-1">New Tab</button>
            </div>
            <!-- Hidden select for fallback/logic compatibility if needed, or we just use JS on the pill -->
            <select id="open-mode" class="hidden">
                <option value="same-tab"></option>
                <option value="new-tab"></option>
            </select>
        </div>

        <div class="drawer-section">
            <label class="drawer-label drawer-label-row" for="toggle-comments-switch">
                <span>Show Comments</span>
                <input type="checkbox" id="toggle-comments-switch" class="switch-toggle" checked>
            </label>
            <!-- Removed explicit Reload button as toggling triggers it, or user can assume auto-reload on setting change -->
        </div>

        <div class="drawer-section">
            <label class="drawer-label" for="comments-depth">Depth: <span id="depth-val">1</span></label>
            <input type="range" id="comments-depth" min="0" max="5" value="1" class="drawer-slider" aria-describedby="depth-val">
            <div class="drawer-checkbox">
                <input id="comments-auto-depth" type="checkbox" checked />
                <label for="comments-auto-depth"
                    title="Automatically expand deep threads if they have a high score">Auto-Expand Best</label>
            </div>
        </div>

        <div class="drawer-section">
            <label class="drawer-label">Filter</label>
            <div class="drawer-checkbox">
                <input id="comments-hide-low" type="checkbox" checked />
                <label for="comments-hide-low">Hide Low Score</label>
            </div>
            <div class="drawer-row-inputs">
                <select id="comments-limit" class="drawer-select-sm" aria-label="Comments limit">
                    <option value="50">50</option>
                    <option value="100" selected>100</option>
                    <option value="200">200</option>
                    <option value="300">300</option>
                    <option value="400">400</option>
                    <option value="500">500</option>
                </select>
                <select id="comments-sort" class="drawer-select-sm" aria-label="Comments sort">
                    <option value="best" selected>Best</option>
                    <option value="top">Top</option>
                    <option value="new">New</option>
                    <option value="old">Old</option>
                    <option value="controversial">Controversial</option>
                </select>
            </div>
        </div>

        <div class="drawer-section">
            <label class="drawer-label">Content</label>
            <div class="drawer-checkbox">
                <input id="blur-nsfw-media" type="checkbox" checked />
                <label for="blur-nsfw-media">Blur NSFW media</label>
            </div>
            <div class="drawer-checkbox">
                <input id="blur-spoilers" type="checkbox" checked />
                <label for="blur-spoilers">Blur spoilers</label>
            </div>
        </div>

        <div class="drawer-section">
            <label class="drawer-label">Alignment</label>
            <div class="segmented-control align-toggles" role="radiogroup" aria-label="Alignment">
                <button class="btn btn--segmented align-btn" data-align="left" title="Left" aria-label="Align left" type="button" role="radio" aria-checked="false">⫷</button>
                <button class="btn btn--segmented align-btn" data-align="center" title="Center" aria-label="Align center" type="button" role="radio" aria-checked="false">≡</button>
                <button class="btn btn--segmented align-btn" data-align="justify" title="Justify" aria-label="Justify" type="button" role="radio" aria-checked="false">≣</button>
                <button class="btn btn--segmented align-btn" data-align="right" title="Right" aria-label="Align right" type="button" role="radio" aria-checked="false">⫸</button>
            </div>
        </div>
    </div>
    <main>
        <article id="spike-article">
            <h1>Loading Reddit Reader Content...</h1>
            <p>Please wait while we extract and sanitize the content from the Reddit post.</p>
        </article>
        <section id="comments" class="comments" role="region" aria-labelledby="comments-title" hidden>
            <h2 id="comments-title">Comments</h2>
            <div id="comments-status" class="comments-status" role="status" aria-live="polite" aria-atomic="true"></div>
            <div id="comments-list"></div>
            <div id="comments-footer" class="comments-footer"></div>
        </section>
    </main>
    <script src="reader-host.js"></script>
</body>

</html>
